<!DOCTYPE html>

<html lang="fa" dir="rtl">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>کتابخانه‌ی مجازی آتا</title>
    <base href="/" />
    <link href="css/bootstrap/bootstrap.rtl.min.css" rel="stylesheet" />
    <link href="https://cdn.app.ataair.ir/fonts/FontAwesome.Pro.5.13.0.Web/css/all.min.css" rel="stylesheet">
    <link href="css/syncfusion/syncfusion-blazor-bootstrap4.css" rel="stylesheet" />
    <link href="_content/Blazored.Toast/blazored-toast.min.css" rel="stylesheet" />
    <link href="_content/Blazored.Modal/blazored-modal.css" rel="stylesheet" />
    <link href="_content/DevExpress.Blazor/dx-blazor.css" rel="stylesheet" />
    <link href="css/ata-layout/sidebar-nav.min.css" rel="stylesheet" />
    <link href="css/book-plugin.css" rel="stylesheet" />
    <link href="css/app.css" rel="stylesheet" />
    <link href="css/ata-layout/custom.css" rel="stylesheet" />
    <link href="css/ata-layout/inside.css" rel="stylesheet" />

    <link href="ATA.Library.Client.Web.UI.styles.css" rel="stylesheet" />
</head>

<body>
    <div id="app">

        <div id="app-install-loading" class="container-fluid" style="display: none; height: 100vh">
            <div style="direction: ltr; font-family: roboto, iranyekan;height: 88vh; display: flex;justify-content: center;align-items: center;">
                <div class="row" style="width:100%">
                    <div class="col-1"></div>
                    <div class="col-10 text-center">
                        <p id="appLoadingTitle" style="direction: rtl">
                            در حال بارگذاری اولیه سامانه
                        </p>
                        <div class="progress" style="height: 25px">
                            <div id="progressbar" class="progress-bar progress-bar-striped active" role="progressbar" style="width: 0"></div>
                        </div>
                    </div>
                    <div class="col-1"></div>
                </div>
            </div>
        </div>

        <div id="app-initial-loading" class="make-center-loader-wrapper" style="height: 100vh">
            <div class="preloader">
                <svg class="circular" viewBox="25 25 50 50">
                    <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle>
                </svg>
            </div>
    </div>


        <script type="text/javascript">

            // Update version in every deployment
            const applicationVersion = "1.2";

            var appVersion = localStorage.getItem("AppVersion");

            if (appVersion === applicationVersion) {

                document.getElementById("app-install-loading").style.display = "none";
                document.getElementById("app-initial-loading").style.display = "flex";
            } else {
                document.getElementById("app-install-loading").style.display = "block";
                document.getElementById("app-initial-loading").style.display = "none";

                if (appVersion) {
                    document.getElementById("appLoadingTitle").innerHTML = "در حال بروزرسانی سامانه";
                }

                const progressbar = document.getElementById("progressbar");

                var i = 0;

                window.loadResourceCallback = (total, name, response) => {
                    if (name.endsWith('.dll')) {
                        i++;
                        const value = parseInt((i * 100.0) / total);
                        const pct = value + '%';

                        progressbar.style.width = pct;
                        console.log(i + '/' + total + ' (' + pct + ') ' + name);
                    }
                }

                localStorage.setItem("AppVersion", applicationVersion);
            }
        </script>
    </div>
    <div id="blazor-error-ui">
        متاسفانه خطایی روی داده است. لطفا صفحه را مجدد بارگزاری نمایید. در صورت عدم رفع مشکل با پشتیبانی تماس بگیرید
        <a href="" class="reload btn btn-sm">بارگزاری مجدد صفحه</a>
        <a class="dismiss">🗙</a>
    </div>

    <script src="_framework/blazor.webassembly.js"></script>
    <script src="js/jquery/jquery.min.js"></script>
    <script src="js/book-plugin.js"></script>
    <script src="_content/Microsoft.AspNetCore.Components.Web.Extensions/headManager.js"></script>
    <script src="_content/Blazored.Modal/blazored.modal.js"></script>
    <script src="js/BlazorExtensions.js"></script>
    <script src="js/ata.js"></script>
</body>

</html>
